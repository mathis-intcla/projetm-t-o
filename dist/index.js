(()=>{const e=async(e,n)=>{const a=`https://api.open-meteo.com/v1/meteofrance?latitude=${e}&longitude=${n}&hourly=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m`;try{const e=await axios.get(a);e.data&&e.data.hourly?t(e.data.hourly):console.error("Invalid weather data format:",e.data)}catch(e){console.error("Error fetching weather data:",e)}},t=e=>{const t=document.getElementById("weather-container");t.innerHTML="";const n=document.getElementById("cityName");n&&(n.innerText="Saint-Étienne");const a=(new Date).getHours();if(e.temperature_2m&&e.wind_speed_10m&&e.relative_humidity_2m&&e.precipitation){const n=e.temperature_2m[a],o=e.wind_speed_10m[a],r=e.relative_humidity_2m[a],i=e.precipitation[a],s=document.createElement("div");s.classList.add("weather-info"),s.innerHTML=`\n            <p>Temperature à l'heure actuelle : <i class="fas fa-thermometer-half"></i> ${n} °C.</p>\n            <p>Vitesse du vent à l'heure actuelle : <i class="fas fa-wind"></i> ${o} km/h.</p>\n            <p>Humidité à l'heure actuelle : <i class="fas fa-tint"></i> ${r} %.</p>\n            <p>Précipitations à l'heure actuelle : <i class="fas fa-cloud-showers-heavy"></i> ${i} mm.</p>\n        `,t.appendChild(s)}else console.error("Données météorologiques manquantes ou malformatées:",e)},n=async e=>{const t=`https://cors-anywhere.herokuapp.com/https://nominatim.openstreetmap.org/search/${encodeURIComponent(e)}?format=json`;try{const n=await axios.get(t);if(n.data.length>0){const{lat:e,lon:t}=n.data[0];return{lat:e,lon:t}}throw new Error("Coordonnées introuvables pour la ville spécifiée:",e)}catch(e){throw console.error("Erreur lors de la récupération des coordonnées:",e),e}};document.getElementById("location-form").addEventListener("submit",(async function(t){t.preventDefault();const a=document.getElementById("city").value;try{const{lat:t,lon:o}=await n(a);e(t,o)}catch(e){console.error(e.message)}})),e(45.4339,4.39),document.addEventListener("DOMContentLoaded",(function(){e(45.4339,4.39),setInterval((()=>{const t=document.getElementById("city").value||"Saint-Étienne";n(t).then((({lat:t,lon:n})=>{e(t,n)})).catch((e=>{console.error("Erreur lors de la récupération des coordonnées:",e)}))}),864e5)}))})();